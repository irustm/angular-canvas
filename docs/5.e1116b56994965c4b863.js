(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"21hC":function(t,e,s){"use strict";s.r(e),s.d(e,"DemosModule",(function(){return w}));var i=s("ofXK"),n=s("npB/"),o=s("tyNb"),a=s("mrSG");let r=(()=>{let t=class{constructor(){this.text="",this.x=0,this.y=20,this.fillStyle="black"}removeChild(t){this.parent.removeChild(t)}setNgAttribute(t,e,s){this[t]=e}setNgProperty(t,e){this[t]=e}draw(t){this.text&&this.x&&this.y&&(t.fillStyle=this.fillStyle,t.fillText(this.text,this.x,this.y))}};return t=Object(a.a)([Object(n.CanvasElement)({selector:"text"})],t),t})(),h=(()=>{let t=class{constructor(){this.fillStyle="black"}removeChild(t){this.parent.removeChild(t)}setNgAttribute(t,e,s){this[t]=e,this.parent&&this.parent.drawAll()}setNgProperty(t,e){this[t]=e,this.parent.drawAll()}draw(t){t.fillRect(this.x,this.y,this.w,this.h)}};return t=Object(a.a)([Object(n.CanvasElement)({selector:"rect"})],t),t})(),l=(()=>{let t=class{constructor(){this.strokeStyle="black"}removeChild(t){this.parent.removeChild(t)}setNgAttribute(t,e,s){this[t]=e,this.parent&&this.parent.drawAll()}setNgProperty(t,e){this[t]=e,this.parent.drawAll()}draw(t){t.strokeStyle=this.strokeStyle,t.beginPath(),t.moveTo(this.x1,this.y1),t.lineTo(this.x2,this.y2),t.stroke()}};return t=Object(a.a)([Object(n.CanvasElement)({selector:"line"})],t),t})(),c=(()=>{let t=class{constructor(){this.deltaX=0,this.lineWidth=1,this.min=0,this.max=100,this.step=5,this.horizontal=!0,this.strokeStyle="black",this.animationBlock=1}setNgProperty(t,e){if("data"===t){this.data&&(this.oldData=this.data.slice()),this.data=e;const t=this.oldData||new Array(this.data.length).fill(0);this.waypointsData=function(t,e){const s=[],i=[];for(let n=0;n<t.length;n++){const s=t[n],o=e[n]-s,a=[];for(let t=0;t<30;t++)a.push(s+o*t/30||0);i.push(a)}for(let n=0;n<30;n++){const e=[];for(let s=0;s<t.length;s++)e.push(i[s][n]);s.push(e)}return s}(t,this.data),this.animationBlock=1}else this[t]=e;this.parent.drawAll()}setStyle(t,e,s){}draw(t){if(this.data&&this.data.length){t.strokeStyle=this.strokeStyle;const e=this.animationBlock;this.drawAnimate(t,this.waypointsData[this.waypointsData[e]?e:this.waypointsData.length-1]),this.animationBlock++,this.needDraw=e<30}}drawAnimate(t,e){const s=this.deltaX,i=this.step,n=Math.floor(Math.abs(s/i)),o=Math.floor(Math.abs(this.getAxisSize(!this.horizontal)/i)),a=e.slice(n,n+o),r=this.getAxisSize(this.horizontal)/(this.max-this.min),h=this.horizontal;t.lineWidth=this.lineWidth,t.beginPath();for(let l=0;l<a.length;l++){const e=s+(n+l)*i;h?t.lineTo(e,a[l]*r):t.lineTo(a[l]*r,e)}t.stroke()}getAxisSize(t){return(t?this.parent.element.height:this.parent.element.width)/window.devicePixelRatio||1}};return t=Object(a.a)([Object(n.CanvasElement)({selector:"graph-line"})],t),t})(),d=(()=>{let t=class{constructor(){this.deltaX=0,this.lineWidth=1,this.step=20,this.horizontal=!1,this.strokeStyle="gray"}removeChild(t){this.parent.removeChild(t)}setNgAttribute(t,e,s){this[t]=e,this.parent&&this.parent.drawAll()}setNgProperty(t,e){this[t]=e,this.parent.drawAll()}draw(t){const e=this.parent.element.width,s=this.parent.element.height,i=this.deltaX,n=this.step,o=Math.floor(Math.abs(i/n)),a=Math.floor(Math.abs(s/n));t.beginPath();for(let h=o;h<=a;h+=n){const s=Math.round(h);t.moveTo(0,i+s),t.lineTo(e,i+s)}const r=(e-1)/4;for(let h=0;h<5;++h){const e=Math.round(r*h);t.moveTo(e,0),t.lineTo(e,s)}t.lineWidth=this.lineWidth,t.strokeStyle=this.strokeStyle,t.stroke()}};return t=Object(a.a)([Object(n.CanvasElement)({selector:"grid"})],t),t})();var u=s("ENp+");let p=(()=>{let t=class{constructor(){this.x1=75,this.x2=150,this.x3=150,this.y1=60,this.y2=95,this.y3=25,this.fillStyle="red",this.hovered=!1,this.callbackFunc={}}addEventListener(t,e){this.callbackFunc[t]=e}setNgProperty(t,e){this[t]=e,this.x&&this.y&&this.checkHover(),this.parent.drawAll()}draw(t){t.beginPath(),t.moveTo(this.x1,this.y1),t.lineTo(this.x2,this.y2),t.lineTo(this.x3,this.y3),t.fillStyle=this.fillStyle,t.fill()}checkHover(){const t=this.x1,e=this.x2,s=this.x3,i=this.y1,n=this.y2,o=this.y3,a=this.x,r=this.y,h=[(t-a)*(n-i)-(e-t)*(i-r)>0,(e-a)*(o-n)-(s-e)*(n-r)>0,(s-a)*(i-o)-(t-s)*(o-r)>0],l=h.every(t=>!0===t),c=h.every(t=>!1===t),d=l||c;this.hovered!==d&&(this.hovered=d,d?(this.fillStyle="green",this.callbackFunc.hovered()):(this.fillStyle="red",this.callbackFunc.unhovered()))}};return t=Object(a.a)([Object(u.CanvasElement)({selector:"triangle"})],t),t})();var b=s("fXoL");let v=(()=>{let t=class{constructor(){this.showData=!1,this.data=f(),this.data2=f(),this.data3=f(),this.text="Hello world",this.textX=0,this.textY=0,this.rectX=20,this.rectY=20,this.mouseX=0,this.mouseY=0,this.deltaX=0,this.step=10}onMouseMove(t){this.mouseX=t.offsetX,this.mouseY=t.offsetY,this.showData=!0}onMouseWheel(t){if(t.preventDefault(),this.ctrlPressed=t.ctrlKey,!0===this.ctrlPressed){const e=this.step+t.deltaY/100;if(e>.01){const t=Math.abs(this.deltaX/this.step),s=Math.abs(this.mouseX/this.step),i=this.mouseX-(t+s)*e;this.deltaX=i<0?i:0,this.step=e}}else{const e=this.deltaX-t.deltaY;this.deltaX=e<0?e:0}}onKeyDown(t){"Control"===t.key&&(this.ctrlPressed=t.ctrlKey)}onKeyUp(t){"Control"===t.key&&(this.ctrlPressed=t.ctrlKey)}onMouseOn(){this.showData=!0}onMouseOut(){this.showData=!1}ngOnInit(){setInterval(()=>{this.data2=f(),this.rectX=100*Math.random(),this.rectY=100*Math.random()},1e3)}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=b.xb({type:t,selectors:[["app-graph-canvas"]],hostBindings:function(t,e){1&t&&b.Nb("mousemove",(function(t){return e.onMouseMove(t)}))("mousewheel",(function(t){return e.onMouseWheel(t)}))("keydown",(function(t){return e.onKeyDown(t)}),!1,b.Wb)("keyup",(function(t){return e.onKeyUp(t)}),!1,b.Wb)("mouseup",(function(){return e.onMouseOn()}))("mouseout",(function(){return e.onMouseOut()}))},decls:6,vars:16,consts:[[1,"first"],[3,"x","y","w","h"],[3,"data","step","deltaX","strokeStyle"]],template:function(t,e){1&t&&(b.Gb(0,"canvas",0),b.Eb(1,"rect",1),b.Fb(),b.Gb(2,"canvas"),b.Eb(3,"graph-line",2),b.Eb(4,"graph-line",2),b.Eb(5,"graph-line",2),b.Fb()),2&t&&(b.ub(1),b.Sb("x",e.mouseX)("y",20)("w",20)("h",20),b.ub(2),b.Sb("data",e.data)("step",e.step)("deltaX",e.deltaX)("strokeStyle","orange"),b.ub(1),b.Sb("data",e.data2)("step",e.step)("deltaX",e.deltaX)("strokeStyle","green"),b.ub(1),b.Sb("data",e.data3)("step",e.step)("deltaX",e.deltaX)("strokeStyle","blue"))},styles:["p[_ngcontent-%COMP%]{font-weight:600;color:red}canvas[_ngcontent-%COMP%]{width:100%}.first[_ngcontent-%COMP%]{z-index:11}"]}),t=Object(a.a)([n.CanvasComponent],t),t})();function f(){const t=[];for(let e=0;e<1e3;e++)t.push(40*Math.random()+30);return t}function y(t,e){1&t&&(b.Gb(0,"div",3),b.cc(1,"Hover: true"),b.Fb())}let m=(()=>{let t=class{constructor(){this.mouseX=0,this.mouseY=0,this.isHovered=!1}onMouseMove(t){this.mouseX=t.offsetX,this.mouseY=t.offsetY}hover(t){this.isHovered=t}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=b.xb({type:t,selectors:[["app-triangle"]],hostBindings:function(t,e){1&t&&b.Nb("mousemove",(function(t){return e.onMouseMove(t)}))},decls:4,vars:3,consts:[[1,"canvas-container"],[3,"x","y","hovered","unhovered"],["class","hovered-text",4,"ngIf"],[1,"hovered-text"]],template:function(t,e){1&t&&(b.Gb(0,"div",0),b.Gb(1,"canvas"),b.Gb(2,"triangle",1),b.Nb("hovered",(function(){return e.hover(!0)}))("unhovered",(function(){return e.hover(!1)})),b.Fb(),b.Fb(),b.Fb(),b.ac(3,y,2,0,"div",2)),2&t&&(b.ub(2),b.Sb("x",e.mouseX)("y",e.mouseY),b.ub(1),b.Sb("ngIf",e.isHovered))},directives:[i.h],styles:[".canvas-container[_ngcontent-%COMP%]{width:250px;height:190px;margin:0 auto;position:relative}canvas[_ngcontent-%COMP%]{width:100%;left:0}.hovered-text[_ngcontent-%COMP%]{text-align:center}"]}),t=Object(a.a)([n.CanvasComponent],t),t})(),g=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=b.xb({type:t,selectors:[["app-demo-container"]],decls:10,vars:0,consts:[[1,"title"],[1,"description"]],template:function(t,e){1&t&&(b.Gb(0,"h4",0),b.cc(1,"Graph example"),b.Fb(),b.Gb(2,"div",1),b.cc(3,"Press Scroll < | > or zoom (Ctrl) graph"),b.Fb(),b.Eb(4,"app-graph-canvas"),b.Gb(5,"h4",0),b.cc(6,"Hover Output example"),b.Fb(),b.Gb(7,"div",1),b.cc(8,"Hover to triangle"),b.Fb(),b.Eb(9,"app-triangle"))},directives:[v,m],styles:["[_nghost-%COMP%]{width:100%;font-family:Arial}.description[_ngcontent-%COMP%], h4.title[_ngcontent-%COMP%]{text-align:center}.description[_ngcontent-%COMP%]{margin:10px 0}app-graph-canvas[_ngcontent-%COMP%], app-triangle[_ngcontent-%COMP%]{position:relative;display:block;width:100%;height:250px}"]}),t})();s("5/jd");let w=(()=>{class t{}return t.\u0275mod=b.Bb({type:t}),t.\u0275inj=b.Ab({factory:function(e){return new(e||t)},providers:[],imports:[[i.b,n.CanvasDomModule.forRoot([r,h,l,c,d,p]),o.a.forChild([{path:"",component:g}])]]}),t})()},"ENp+":function(t,e,s){"use strict";s("5/jd"),s("CCc+");var i=s("luQ/");s.d(e,"CanvasElement",(function(){return i.a})),s("sep5"),s("WIm8"),s("wMPD"),s("M8p+"),s("c9zO")},c9zO:function(t,e,s){"use strict";new(s("fXoL").q)("CanvasRenderConfig")}}]);