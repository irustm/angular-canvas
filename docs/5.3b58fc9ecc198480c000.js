(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"21hC":function(t,e,s){"use strict";s.r(e),s.d(e,"DemosModule",(function(){return y}));var i=s("ofXK"),a=s("npB/"),n=s("tyNb"),o=s("fXoL"),r=s("mrSG");let l=(()=>{let t=class{constructor(){this.showData=!1,this.data=h(),this.data2=h(),this.data3=h(),this.text="Hello world",this.textX=0,this.textY=0,this.rectX=20,this.rectY=20,this.mouseX=0,this.mouseY=0,this.deltaX=0,this.step=10}onMouseMove(t){this.mouseX=t.offsetX,this.mouseY=t.offsetY,this.showData=!0}onMouseWheel(t){if(t.preventDefault(),this.ctrlPressed=t.ctrlKey,!0===this.ctrlPressed){const e=this.step+t.deltaY/100;if(e>.01){const t=Math.abs(this.deltaX/this.step),s=Math.abs(this.mouseX/this.step),i=this.mouseX-(t+s)*e;this.deltaX=i<0?i:0,this.step=e}}else{const e=this.deltaX-t.deltaY;this.deltaX=e<0?e:0}}onKeyDown(t){"Control"===t.key&&(this.ctrlPressed=t.ctrlKey)}onKeyUp(t){"Control"===t.key&&(this.ctrlPressed=t.ctrlKey)}onMouseOn(){this.showData=!0}onMouseOut(){this.showData=!1}ngOnInit(){setInterval(()=>{this.data2=h(),this.rectX=100*Math.random(),this.rectY=100*Math.random()},1e3)}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.xb({type:t,selectors:[["app-graph-canvas-example"]],hostBindings:function(t,e){1&t&&o.Nb("mousemove",(function(t){return e.onMouseMove(t)}))("mousewheel",(function(t){return e.onMouseWheel(t)}))("keydown",(function(t){return e.onKeyDown(t)}),!1,o.Wb)("keyup",(function(t){return e.onKeyUp(t)}),!1,o.Wb)("mouseup",(function(){return e.onMouseOn()}))("mouseout",(function(){return e.onMouseOut()}))},decls:6,vars:16,consts:[[1,"first"],[3,"x","y","w","h"],[3,"data","step","deltaX","strokeStyle"]],template:function(t,e){1&t&&(o.Gb(0,"canvas",0),o.Eb(1,"rect",1),o.Fb(),o.Gb(2,"canvas"),o.Eb(3,"graph-line",2),o.Eb(4,"graph-line",2),o.Eb(5,"graph-line",2),o.Fb()),2&t&&(o.ub(1),o.Sb("x",e.mouseX)("y",20)("w",20)("h",20),o.ub(2),o.Sb("data",e.data)("step",e.step)("deltaX",e.deltaX)("strokeStyle","orange"),o.ub(1),o.Sb("data",e.data2)("step",e.step)("deltaX",e.deltaX)("strokeStyle","green"),o.ub(1),o.Sb("data",e.data3)("step",e.step)("deltaX",e.deltaX)("strokeStyle","blue"))},styles:["p[_ngcontent-%COMP%]{font-weight:600;color:red}canvas[_ngcontent-%COMP%]{width:100%}.first[_ngcontent-%COMP%]{z-index:11}"]}),t=Object(r.a)([a.CanvasComponent],t),t})();function h(){const t=[];for(let e=0;e<1e3;e++)t.push(40*Math.random()+30);return t}let c=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.xb({type:t,selectors:[["app-graph-container"]],decls:5,vars:0,consts:[[1,"title"],[1,"description"]],template:function(t,e){1&t&&(o.Gb(0,"h4",0),o.cc(1,"Graph example"),o.Fb(),o.Eb(2,"app-graph-canvas-example"),o.Gb(3,"div",1),o.cc(4,"Press Scroll < | > or zoom (Ctrl) graph"),o.Fb())},directives:[l],styles:["[_nghost-%COMP%]{width:100%;font-family:Arial}.description[_ngcontent-%COMP%], h4.title[_ngcontent-%COMP%]{text-align:center}.description[_ngcontent-%COMP%]{margin:10px 0}app-graph-canvas-example[_ngcontent-%COMP%]{position:relative;display:block;width:100%;height:250px}"]}),t})(),d=(()=>{let t=class{constructor(){this.text="",this.x=0,this.y=20,this.fillStyle="black"}appendChild(t){}addClass(t){}insertBefore(t,e){}removeAttribute(t,e){}removeChild(t){this.parent.removeChild(t)}removeClass(t){}removeStyle(t,e){}setNgAttribute(t,e,s){this[t]=e}setNgProperty(t,e){this[t]=e}setStyle(t,e,s){}setValue(t){}draw(t){this.text&&this.x&&this.y&&(t.fillStyle=this.fillStyle,t.fillText(this.text,this.x,this.y))}};return t=Object(r.a)([Object(a.CanvasElement)({selector:"text"})],t),t})(),p=(()=>{let t=class{constructor(){this.fillStyle="black"}appendChild(t){}addClass(t){}insertBefore(t,e){}removeAttribute(t,e){}removeChild(t){this.parent.removeChild(t)}removeClass(t){}removeStyle(t,e){}setNgAttribute(t,e,s){this[t]=e,this.parent&&this.parent.drawAll()}setNgProperty(t,e){this[t]=e,this.parent.drawAll()}setStyle(t,e,s){}setValue(){}draw(t){t.fillRect(this.x,this.y,this.w,this.h)}};return t=Object(r.a)([Object(a.CanvasElement)({selector:"rect"})],t),t})(),u=(()=>{let t=class{constructor(){this.strokeStyle="black"}appendChild(t){}addClass(t){}insertBefore(t,e){}removeAttribute(t,e){}removeChild(t){this.parent.removeChild(t)}removeClass(t){}removeStyle(t,e){}setNgAttribute(t,e,s){this[t]=e,this.parent&&this.parent.drawAll()}setNgProperty(t,e){this[t]=e,this.parent.drawAll()}setStyle(t,e,s){}setValue(){}draw(t){t.strokeStyle=this.strokeStyle,t.beginPath(),t.moveTo(this.x1,this.y1),t.lineTo(this.x2,this.y2),t.stroke()}};return t=Object(r.a)([Object(a.CanvasElement)({selector:"line"})],t),t})(),m=(()=>{let t=class{constructor(){this.deltaX=0,this.lineWidth=1,this.min=0,this.max=100,this.step=5,this.horizontal=!0,this.strokeStyle="black",this.animationBlock=1}setNgProperty(t,e){if("data"===t){this.data&&(this.oldData=this.data.slice()),this.data=e;const t=this.oldData||new Array(this.data.length).fill(0);this.waypointsData=function(t,e){const s=[],i=[];for(let a=0;a<t.length;a++){const s=t[a],n=e[a]-s,o=[];for(let t=0;t<30;t++)o.push(s+n*t/30||0);i.push(o)}for(let a=0;a<30;a++){const e=[];for(let s=0;s<t.length;s++)e.push(i[s][a]);s.push(e)}return s}(t,this.data),this.animationBlock=1}else this[t]=e;this.parent.drawAll()}setStyle(t,e,s){}draw(t){if(this.data&&this.data.length){t.strokeStyle=this.strokeStyle;const e=this.animationBlock;this.drawAnimate(t,this.waypointsData[this.waypointsData[e]?e:this.waypointsData.length-1]),this.animationBlock++,this.needDraw=e<30}}drawAnimate(t,e){const s=this.deltaX,i=this.step,a=Math.floor(Math.abs(s/i)),n=Math.floor(Math.abs(this.getAxisSize(!this.horizontal)/i)),o=e.slice(a,a+n),r=this.getAxisSize(this.horizontal)/(this.max-this.min),l=this.horizontal;t.lineWidth=this.lineWidth,t.beginPath();for(let h=0;h<o.length;h++){const e=s+(a+h)*i;l?t.lineTo(e,o[h]*r):t.lineTo(o[h]*r,e)}t.stroke()}getAxisSize(t){return(t?this.parent.element.height:this.parent.element.width)/window.devicePixelRatio||1}};return t=Object(r.a)([Object(a.CanvasElement)({selector:"graph-line"})],t),t})(),b=(()=>{let t=class{constructor(){this.deltaX=0,this.lineWidth=1,this.step=20,this.horizontal=!1,this.strokeStyle="gray"}appendChild(t){}insertBefore(t,e){}removeAttribute(t,e){}removeChild(t){this.parent.removeChild(t)}removeClass(t){}removeStyle(t,e){}setNgAttribute(t,e,s){this[t]=e,this.parent&&this.parent.drawAll()}setNgProperty(t,e){this[t]=e,this.parent.drawAll()}setStyle(t,e,s){}setValue(){}draw(t){const e=this.parent.element.width,s=this.parent.element.height,i=this.deltaX,a=this.step,n=Math.floor(Math.abs(i/a)),o=Math.floor(Math.abs(s/a));t.beginPath();for(let l=n;l<=o;l+=a){const s=Math.round(l);t.moveTo(0,i+s),t.lineTo(e,i+s)}const r=(e-1)/4;for(let l=0;l<5;++l){const e=Math.round(r*l);t.moveTo(e,0),t.lineTo(e,s)}t.lineWidth=this.lineWidth,t.strokeStyle=this.strokeStyle,t.stroke()}addClass(t){}};return t=Object(r.a)([Object(a.CanvasElement)({selector:"grid"})],t),t})();s("5/jd");let y=(()=>{class t{}return t.\u0275mod=o.Bb({type:t}),t.\u0275inj=o.Ab({factory:function(e){return new(e||t)},providers:[],imports:[[i.b,a.CanvasDomModule.forRoot([d,p,u,m,b]),n.a.forChild([{path:"",component:c}])]]}),t})()}}]);